# 旧版插件适配器 (Old Plugin Adapter)

## 简介
旧版插件适配器是一个用于加载和管理旧版本插件的工具。它允许新版框架兼容运行旧版插件，提供了插件状态查看和重载功能。

## 基本信息
- 插件名称: OldPluginAdapter
- 版本: 1.0.0
- 作者: Xiaoyi
- 触发关键词: Any (处理所有消息)

## 功能特性
- ✨ 自动加载旧版插件
- 🔄 支持插件热重载
- 📊 查看插件运行状态
- 🔍 详细的错误日志
- 🛡️ 插件隔离运行
- 📁 自动创建插件目录

## 指令列表
| 指令 | 说明 |
|------|------|
| `/plugin status` | 查看当前已加载的旧版插件列表 |
| `/plugin reload` | 重新加载所有旧版插件 |

## 插件目录结构
```
old_plugin_adapter/
├── old_plugin_adapter[New].py
├── README.md
└── old_plugins/
    ├── plugin1.py
    ├── plugin2.py
    └── ...
```

## 旧版插件要求
旧版插件必须满足以下条件：
- 必须包含 `on_message` 函数
- 可选包含 `TRIGGHT_KEYWORD` 变量
- 文件名不能以 `xyi_` 开头
- 文件扩展名必须为 `.py` 或 `.pyw`

## 安装说明
1. 将插件文件放置在机器人的plugins目录下
2. 创建 `old_plugins` 文件夹（如不存在会自动创建）
3. 将旧版插件放入 `old_plugins` 文件夹
4. 重启机器人或使用 `/plugin reload` 加载插件

## 插件响应格式
### 状态查询响应
```
当前加载的旧版插件（N个）：
- 插件1 (触发关键词1)
- 插件2 (触发关键词2)
- 插件3 (Any)
...
```

### 重载响应
```
已重新加载 N 个旧版插件
```

## 错误处理
- 插件加载失败会显示具体错误信息
- 插件执行错误不会影响其他插件运行
- 所有错误都会记录到控制台日志

## 调试提示
- 检查插件是否正确放置在 `old_plugins` 文件夹中
- 确保旧版插件包含必要的 `on_message` 函数
- 使用 `/plugin status` 确认插件加载状态
- 遇到问题时查看控制台错误日志

## 注意事项
- 旧版插件运行在隔离环境中
- 插件重载不会影响机器人其他功能
- 建议定期检查插件运行状态

## 联系方式与支持
如有问题或建议，请通过以下方式联系：
- 提交 Issue
- 联系插件作者

## 更新日志
### v1.0.0
- 初始版本发布
- 支持基础插件加载功能
- 支持插件状态查询和重载
- 实现插件隔离运行